##############################################################################
## This file is part of 'SLAC Firmware Standard Library'.
## It is subject to the license terms in the LICENSE.txt file found in the
## top-level directory of this distribution and at:
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html.
## No part of 'SLAC Firmware Standard Library', including this file,
## may be copied, modified, propagated, or distributed except according to
## the terms contained in the LICENSE.txt file.
##############################################################################

TPGMiniCore: &TPGMiniCore
  name: TPGMiniCore
  description: Embedded timing pattern generator
  size: 0x10000
  #########
  IntField:
  #########
    #########################################################
    - offset: 0x0000
      name: TxReset
      sizeBits: 1
      lsBit: 0
      mode: RW
      description: Reset transmit link
    #########################################################
    - offset: 0x0000
      name: TxPolarity
      sizeBits: 1
      lsBit: 1
      mode: RW
      description: Invert transmit link polarity
    #########################################################
    - offset: 0x0000
      name: TxLoopback
      sizeBits: 3
      lsBit: 2
      mode: RW
      description: Set transmit link loopback
    #########################################################
    - offset: 0x0000
      name: TxInhibit
      sizeBits: 1
      lsBit: 5
      mode: RW
      description: Set transmit link inhibit
    #########################################################
    - offset: 0x0004
      name: BaseControl
      sizeBits: 16
      lsBit: 0
      mode: RW
      description: Base rate trigger divisor
    #########################################################
    - offset: 0x0008
      name: PulseIdL
      sizeBits: 32
      mode: RW
      description: Pulse ID lower word
    #########################################################
    - offset: 0x000C
      name: PulseIdU
      sizeBits: 32
      mode: RW
      description: Pulse ID upper word
    #########################################################
    - offset: 0x0010
      name: TStampL
      sizeBits: 32
      mode: RW
      description: Time stamp lower word
    #########################################################
    - offset: 0x0014
      name: TStampU
      sizeBits: 32
      mode: RW
      description: Time stamp upper word
    #########################################################
    - offset: 0x0018
      name: FixedRateDiv
      sizeBits: 32
      stride: 32
      nelms: 10
      mode: RW
      description: Fixed rate marker divisors
    #########################################################
    - offset: 0x0040
      name: RateReload
      sizeBits: 1
      mode: WO
      description: Loads cached fixed rate marker divisors
    #########################################################
    - offset: 0x004C
      name: NBeamSeq
      sizeBits: 8
      lsBit: 0
      mode: RO
      description: Number of beam request engines
    #########################################################
    - offset: 0x004D
      name: NControlSeq
      sizeBits: 8
      lsBit: 0
      mode: RO
      description: Number of control sequence engines
    #########################################################
    - offset: 0x004E
      name: NArraysBsa
      sizeBits: 8
      lsBit: 0
      mode: RO
      description: Number of BSA arrays
    #########################################################
    - offset: 0x004F
      name: SeqAddrLen
      sizeBits: 4
      lsBit: 0
      mode: RO
      description: Number of beam sequence engines
    #########################################################
    - offset: 0x004F
      name: NAllowSeq
      sizeBits: 4
      lsBit: 4
      mode: RO
      description: Number of beam allow engines
    #########################################################
    - offset: 0x0050
      name: BsaCompleteL
      sizeBits: 32
      mode: RW
      description: BSA complete lower word
    #########################################################
    - offset: 0x0054
      name: BsaCompleteU
      sizeBits: 32
      mode: RW
      description: BSA complete upper word
    #########################################################
    - offset: 0x0200
      name: BsaRateSel
      sizeBits: 13
      lsBit: 0
      stride: 64
      nelms: 64
      mode: RW
      description: BSA def rate selection
    #########################################################
    - offset: 0x0200
      name: BsaDestSel
      sizeBits: 19
      lsBit: 13
      stride: 64
      nelms: 64
      mode: RW
      description: BSA def destination selection
    #########################################################
    - offset: 0x0204
      name: BsaNtoAvg
      sizeBits: 16
      lsBit: 0
      stride: 64
      nelms: 64
      mode: RW
      description: BSA def num acquisitions to average
    #########################################################
    - offset: 0x0204
      name: BsaAvgToWr
      sizeBits: 16
      lsBit: 16
      stride: 64
      nelms: 64
      mode: RW
      description: BSA def num averages to record
    #########################################################
    - offset: 0x0500
      name: PllCnt
      sizeBits: 32
      mode: RO
      description: Count of PLL status changes 
    #########################################################
    - offset: 0x0504
      name: ClkCnt
      sizeBits: 32
      mode: RO
      description: Count of local 186M clock
    #########################################################
    - offset: 0x0508
      name: SyncErrCnt
      sizeBits: 32
      mode: RO
      description: Count of 71k sync errors
    #########################################################
    - offset: 0x050C
      name: CountInterval
      sizeBits: 32
      mode: RW
      description: Interval counters update period
    #########################################################
    - offset: 0x0510
      name: BaseRateCount
      sizeBits: 32
      mode: RO
      description: Count of base rate triggers
    #########################################################




